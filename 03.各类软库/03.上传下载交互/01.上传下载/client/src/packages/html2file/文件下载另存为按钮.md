# 文件下载另存为 按钮 设计思路

使用DOM元素模拟

```ts
// 下载之前弹出框
// http://blog.haoji.me/js-download.html
function saveAs() {
  const oDiv = document.createElement("div")
  const style =
    "position:absolute; width:600px; height: 600px; top: 50%; left: 50%; margin-left: -150px; margin-top:-100px"
  oDiv.setAttribute("style", style)
  const text = document.createTextNode("File")
  const oInput = document.createElement("input")
  oInput.setAttribute("id", "filename")
  oInput.setAttribute("type", "text")
  oDiv.appendChild(text)
  oDiv.appendChild(oInput)
  oInput.click()
  document.body.append(oDiv)
}

function openDialog() {
  // 生成一个仿的对话框
  const oDiv = document.createElement("div")
  const style = `position:absolute; 
    width:600px; height: 200px; 
    top: 50%; left: 50%; 
    margin-left: -150px; margin-top:-100px`
  oDiv.setAttribute("style", style)
  const text = document.createTextNode("File")
  const oInput1 = document.createElement("input")
  oInput1.setAttribute("id", "inputFile")
  oInput1.setAttribute("type", "file")
  const oInput2 = document.createElement("input")
  oInput2.setAttribute("id", "openButton")
  oInput2.setAttribute("type", "button")
  oInput2.setAttribute("value", "open")
  oDiv.appendChild(text)
  oDiv.appendChild(oInput1)
  oDiv.appendChild(oInput2)
  oInput2.click()
  document.body.append(oDiv)
 
}
```

判断浏览器

```ts

function isIE() {
  const userAgent = navigator.userAgent // 取得浏览器的userAgent字符串
  const isIE = userAgent.indexOf("compatible") > -1 && userAgent.indexOf("MSIE") > -1 // 判断是否IE<11浏览器
  const isEdge = userAgent.indexOf("Edge") > -1 && !isIE // 判断是否IE的Edge浏览器
  const isIE11 = userAgent.indexOf("Trident") > -1 && userAgent.indexOf("rv:11.0") > -1 // 判断是否IE11浏览器
  if (isIE) {
    const reIE = new RegExp("MSIE (\\d+\\.\\d+);")
    reIE.test(userAgent)
    const fIEVersion = parseFloat(RegExp["$1"])
    if (fIEVersion == 7) {
      return 7
    } else if (fIEVersion == 8) {
      return 8
    } else if (fIEVersion == 9) {
      return 9
    } else if (fIEVersion == 10) {
      return 10
    } else {
      return 6 // IE版本<=7
    }
  } else if (isEdge) {
    return "edge" // edge
  } else if (isIE11) {
    return 11 // IE11
  } else {
    return false // 不是ie浏览器
  }
}
```

html

```html
  <button @click="saveAs">web 带对话框</button>
  <button @click="openDialog">web 带对话框</button>
```

