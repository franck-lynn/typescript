# express 原理

```ts
const app = express()
```

这行产生一个 app 服务器对象,  调用的是 createApplication() 方法, 生成一个 app.

调用 app对象中, 储存了一个方法的请求方法和中间件的的数组, 用于处理路由或者中间件, app.routes.

数组迭代采用的是 next() 方法. 这是一个递归的方法.

假设 app.routes 储存了 get 方法. 

但get请求到来时. 

```ts
app.get("/name", (req: any, res: any) => {
  res.end("zfpx")
})
```

app.listen()监听函数会监听到这个请求,  app 拿到这个请求的 method(get, post这些), 路径 "/name", handler: 就是 (req: any, res: any) => { res.end("zfpx") } 这个函数.

然后启动 next() 方法, 当 path 和 method 都相等时, 执行 handler(req, res)





