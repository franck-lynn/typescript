# vite 基本环境搭建

#### 首先遇到的是递归打印文件目录结构程序运行错误问题

在 vscode 中, run  code 时出现

```bash
SyntaxError: Cannot use import statement outside a module
```

这是由于在 .vscode/setting.json 中配置了 

```json
 "code-runner.executorMap": {
     // 运行 esm 模块时的命令
    "typescript": "node --no-warnings --experimental-specifier-resolution=node --loader ts-node/esm",
 }
```

是node 在运行时把 es6 模块按照 commonjs 运行了, 所以报了这个错误. 

直接执行 

```bash
node -r esm 递归打印文件夹层级结构供md使用.js
```

就可以. node 可以执行 CMD 模块, 这是node 的标准方式, 与 es6 不兼容,

```ts
PS ...\递归读取文件夹> node -r esm 递归打印文件夹层级结构供md使用.js

client 
|-- .eslintrc.js
|-- .stylelintrc.js
|-- index.html
|-- node_modules // 这个时运行时产生的临时文件夹
|-- package.json
|-- public
|   |-- favicon.ico
|-- src
|   |-- App.vue
|   |-- main.ts
|-- |-- typings
|   |   |-- auto-imports.d.ts
|   |   |-- shims.d.ts  // import vue 文件时不报错的类型声明
|   |   |-- vue-shim.d.ts
|-- tsconfig.json
|-- vite.config.ts
```

#### vite 采用 typescript, 需要配置 tsconfig.json 对ts 语言进行配置

这个 tsconfig.json 是针对 vue, vite 前端使用 ts 进行的配置, 具体配置参考这个文件.

#### package.json 运行脚本配置

```json
 "scripts": {
    "dev": "vite --config vite.config.ts" 
  },
```

在 client 目录下运行 

```bash
npm run dev 
```

就能启动前端的程序, 

#### 对 vite.config.ts 进行初步配置

```ts
import { UserConfig } from "vite"
import vue from "@vitejs/plugin-vue" // vue 插件

const config: UserConfig = {
  plugins: [vue()],
  // https://github.com/vitejs/vite/issues/5833
  server: {
    // 配置 localhost 没有 http://192.168.1.160:8080/ 这种 network
    // 配置 0.0.0.0 会有  http://192.168.1.160:8080/ 这种 network
    host: "0.0.0.0", 
    port: 8080,
  },
}
export default config

```

执行 
```bash
npm run dev 
```

打开浏览器就可以看到  

# vite 环境搭建



